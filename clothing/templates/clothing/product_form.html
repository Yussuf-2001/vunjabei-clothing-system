{% extends 'clothing/base.html' %}
{% block title %}{% if product %}Edit Product{% else %}Create Product{% endif %}{% endblock %}
{% block content %}
    <a href="{% url 'product_list' %}">Back to products</a>
    <h2>{% if product %}Edit Product: {{ product.name }}{% else %}Create Product{% endif %}</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <p><label>Name:<br><input type="text" name="name" value="{{ product.name|default:'' }}" required></label></p>
        <p><label>Category:<br>
            <select name="category">
                <option value="">-- None --</option>
                {% for c in categories %}
                    <option value="{{ c.id }}" {% if product.category.id == c.id %}selected{% endif %}>{{ c.name }}</option>
                {% endfor %}
            </select>
        </label></p>
        <p><label>Price:<br><input type="number" step="0.01" name="price" value="{{ product.price|default:'' }}" required></label></p>
        <p><label>Quantity:<br><input type="number" name="quantity" value="{{ product.quantity|default:'0' }}" required></label></p>
        <p><label>Image:<br><input type="file" name="image" accept="image/*"></label></p>
        {% if product.image %}
            <p>Current Image: <a href="{{ product.image.url }}">{{ product.image.name }}</a></p>
        {% endif %}
        <p><button type="submit" class="btn">Save</button></p>
    </form>
{% endblock %}
